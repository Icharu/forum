<div *ngIf="showButton" class="img">
  <img src="/img/welcome.png" class="img2" alt="yknow">
  <div>
    <h2>Está curtindo o site?</h2>
    <p>
      Se quiser sugerir alguma coisa, contate o dev!
    </p>
  </div>
</div>
<mat-sidenav-container class="sidenav-container">
  <!-- SideNav -->
  <mat-sidenav #drawer mode="side" class="sidenav" [(opened)]="opened">
    <mat-nav-list>
      <a mat-list-item (click)="VoltarForum()" class="white"><mat-icon>home</mat-icon> Inicio</a>
      <a mat-list-item (click)="IrParaVida()" class="white"><mat-icon>school</mat-icon> Vida no Curso</a>
      <a mat-list-item (click)="IrParaCurso()" class="white"><mat-icon>book</mat-icon> Estrutura Curricular</a>
      <a mat-list-item (click)="IrParaTurmas()" class="white"><mat-icon>group</mat-icon> Turmas</a>
      <a mat-list-item (click)="IrParaFaqs()" class="white"><mat-icon>help</mat-icon> Dúvidas Frequentes</a>
      <a mat-list-item (click)="IrParaSimulador()" class="white"><mat-icon>grading</mat-icon> Simulador de CR</a>
      <a mat-list-item (click)="IrParaCreditos()" class="white"><mat-icon>person</mat-icon> Créditos</a>
      <a *ngIf="isAdmin" mat-list-item (click)="IrParaAdmin()" class="white"><mat-icon>person</mat-icon> Admin</a>
    </mat-nav-list>
        <div class="updates">
      <h2 class="updates2"><mat-icon>update</mat-icon> Atualizações:</h2>
      <p class="updates2">-> Adicionado fluxograma dos cursos
        <br>-> Adicionado CRUD para notícias
        <br>-> Adicionado Simulador de CR
      </p>
        <h2><mat-icon>archive</mat-icon> Link para repositório do site:</h2>
        <button class="btn1" (click)="abrirSite('https://github.com/Icharu/forum')">Fórum</button>
    </div>
  </mat-sidenav>
  <mat-sidenav-content>
    <mat-toolbar color="primary" class="toolbar">
      <button mat-icon-button (click)="drawer.toggle()">
        <mat-icon>menu</mat-icon>
      </button>
      <span class="username">Fórum do Curso de EngComp</span>
      <span class="flex-spacer"></span>
            <span *ngIf="isLogged" class="username">{{ username1 }}</span>
      <button *ngIf="isLogged" class="btn1" (click)="logout()">
            Log-out
      </button>
        <button *ngIf="!isLogged" class="btn1" (click)="IrParaLogin()">
            Login
      </button>
    </mat-toolbar>
    <div class="header">
      <div class="Bemvindo">
              <div class="frase fade-slide-up"  [innerHTML]="textoDigitado">
              </div>
        <img src="/img/something.png" class="gif" alt="yknow">
      </div>

<form #newsForm="ngForm" (ngSubmit)="salvarNews()" class="news-form">

  <!-- TITLE -->
  <div class="form-group">
    <label for="title">Título</label>
    <input
      type="text"
      id="title"
      name="title"
      [(ngModel)]="title"
      required
      placeholder="Título da notícia"
    />
  </div>

  <!-- IMAGE URL -->
  <div class="form-group">
    <label for="imageUrl">Imagem (URL)</label>
    <input
      type="text"
      id="imageUrl"
      name="imageUrl"
      [(ngModel)]="imageUrl"
      required
      placeholder="https://example.com/image.png"
      class="form-control"
    />
  </div>

  <!-- IMAGE PREVIEW (optional but recommended) -->
  <div *ngIf="imageUrl" class="image-preview">
    <img [src]="imageUrl" alt="Preview da imagem" />
  </div>

   <div class="form-group">
    <label for="datatime">Data</label>
    <textarea
      id="datatime"
      name="datatime"
      [(ngModel)]="datatime"
      required
      placeholder="Dia da notícia"
    ></textarea>
  </div>
  <!-- DESCRIPTION -->
  <div class="form-group">
    <label for="descr">Descrição</label>
    <textarea
      id="descr"
      name="descr"
      [(ngModel)]="descr"
      required
      placeholder="Descrição da notícia"
    ></textarea>
  </div>

  <!-- SUBMIT -->
  <button
    type="submit"
    [disabled]="newsForm.invalid"
    class="submit-btn"
  >
    Publicar notícia
  </button>

</form>


    </div>
    
    <section class="know-more3" id="know-more3">
  <div class="text">
    <h2>Notícias recentes</h2>
    <p>Será sempre gravado do mais novo até o mais antigo</p>

    <div class="carousel-wrapper">
      <button class="carousel-btn prev" (click)="scrollCarousel(-1)">&#10094;</button>

      <div class="grid-container" #carouselRef>
        
       <div class="book-card" *ngFor="let news of newsList">
  <div class="book-image">
    <img [src]="news.imgurl" [alt]="news.title">
  </div>

  <div class="book-content">
    <ng-container *ngIf="editingId !== news.id; else editMode">
      <h3>{{ news.title }}</h3>

      <p class="date">{{ news.data }}</p>
      <p class="description">{{ news.descr }}</p>

      <div *ngIf="isAdmin" class="admin-actions">
        <button class="btn-edit" (click)="editar(news)">Editar</button>
        <button class="btn-delete" (click)="confirmarDelete(news.id!)">Excluir</button>
      </div>
    </ng-container>
    <ng-template #editMode>
      <input [(ngModel)]="newsEdit.title" placeholder="Título" />
      <input [(ngModel)]="newsEdit.imgurl" placeholder="Imagem URL" />
      <input [(ngModel)]="newsEdit.data" placeholder="Data" />
      <textarea [(ngModel)]="newsEdit.descr" placeholder="Descrição"></textarea>

      <div class="admin-actions">
        <button class="btn-save" (click)="salvarEdicao(news.id!)">Salvar</button>
        <button class="btn-cancel" (click)="cancelarEdicao()">Cancelar</button>
      </div>
    </ng-template>

  </div>
</div>
</div>
    </div>

  </div>
</section>
<section>
  <h2>Lista de Usuários</h2>
        <table class="mat-mdc-table"> 
        <thead>
          <tr>
            <th>ID</th>
            <th>E-mail</th>
            <th>Administrador</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let usuario of dataSource.filteredData">
            <td>{{ usuario.id }}</td>    
            <td>{{ usuario.username }}</td>   
            <td>{{ usuario.isAdmin }}</td>    
          </tr>
        </tbody>
      </table>
      <div class="pagination">
        <span>Itens por página:</span>
        <select [(ngModel)]="itensPorPagina">
          <option *ngFor="let qtd of [5,10,20]" [value]="qtd">{{ qtd }}</option>
        </select>
        <span>{{ dataSource.data.length }} total</span>
      </div>
</section>
  </mat-sidenav-content>
  
</mat-sidenav-container>